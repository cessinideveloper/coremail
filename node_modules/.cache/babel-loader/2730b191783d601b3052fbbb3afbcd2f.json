{"ast":null,"code":"/*fs-web@1.0.0#core*/\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.readFile = readFile;\nexports.readString = readString;\nexports.writeFile = writeFile;\nexports.removeFile = removeFile;\nexports.readdir = readdir;\nexports.mkdir = mkdir;\nexports.rmdir = rmdir;\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nvar _path = require('path');\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _directory_entry = require('./directory_entry.js');\n\nvar _directory_entry2 = _interopRequireDefault(_directory_entry);\n\nfunction ab2str(buf) {\n  return String.fromCharCode.apply(null, new Uint16Array(buf));\n}\n\nfunction str2ab(str) {\n  var buf = new ArrayBuffer(str.length * 2);\n  var bufView = new Uint16Array(buf);\n\n  for (var i = 0, strLen = str.length; i < strLen; i++) {\n    bufView[i] = str.charCodeAt(i);\n  }\n\n  return buf;\n}\n\nvar DB_NAME = window.location.host + '_filesystem',\n    OS_NAME = 'files',\n    DIR_IDX = 'dir';\n\nfunction init(callback) {\n  var req = window.indexedDB.open(DB_NAME, 1);\n\n  req.onupgradeneeded = function (e) {\n    var db = e.target.result;\n    var objectStore = db.createObjectStore(OS_NAME, {\n      keyPath: 'path'\n    });\n    objectStore.createIndex(DIR_IDX, 'dir', {\n      unique: false\n    });\n  };\n\n  req.onsuccess = function (e) {\n    callback(e.target.result);\n  };\n}\n\nfunction initOS(type, callback) {\n  init(function (db) {\n    var trans = db.transaction([OS_NAME], type),\n        os = trans.objectStore(OS_NAME);\n    callback(os);\n  });\n}\n\nvar readFrom = function readFrom(fileName) {\n  return new Promise(function (resolve, reject) {\n    initOS('readonly', function (os) {\n      var req = os.get(fileName);\n      req.onerror = reject;\n\n      req.onsuccess = function (e) {\n        var res = e.target.result;\n\n        if (res && res.data) {\n          resolve(res.data);\n        } else {\n          reject('File not found');\n        }\n      };\n    });\n  });\n};\n\nfunction readFile(fileName) {\n  return readFrom(fileName).then(function (data) {\n    if (!(data instanceof ArrayBuffer)) {\n      data = str2ab(data.toString());\n    }\n\n    return data;\n  });\n}\n\nfunction readString(fileName) {\n  return readFrom(fileName).then(function (data) {\n    if (data instanceof ArrayBuffer) {\n      data = ab2str(data);\n    }\n\n    return data;\n  });\n}\n\n;\n\nfunction writeFile(fileName, data) {\n  return new Promise(function (resolve, reject) {\n    initOS('readwrite', function (os) {\n      var req = os.put({\n        'path': fileName,\n        'dir': _path2['default'].dirname(fileName),\n        'type': 'file',\n        'data': data\n      });\n      req.onerror = reject;\n\n      req.onsuccess = function (e) {\n        resolve();\n      };\n    });\n  });\n}\n\n;\n\nfunction removeFile(fileName) {\n  return new Promise(function (resolve) {\n    initOS('readwrite', function (os) {\n      var req = os['delete'](fileName);\n\n      req.onerror = req.onsuccess = function (e) {\n        resolve();\n      };\n    });\n  });\n}\n\n;\n\nfunction withTrailingSlash(path) {\n  var directoryWithTrailingSlash = path[path.length - 1] === '/' ? path : path + '/';\n  return directoryWithTrailingSlash;\n}\n\nfunction readdir(directoryName) {\n  return new Promise(function (resolve, reject) {\n    initOS('readonly', function (os) {\n      var dir = _path2['default'].dirname(withTrailingSlash(directoryName));\n\n      var idx = os.index(DIR_IDX);\n      var range = IDBKeyRange.only(dir);\n      var req = idx.openCursor(range);\n\n      req.onerror = function (e) {\n        reject(e);\n      };\n\n      var results = [];\n\n      req.onsuccess = function (e) {\n        var cursor = e.target.result;\n\n        if (cursor) {\n          var value = cursor.value;\n          var entry = new _directory_entry2['default'](value.path, value.type);\n          results.push(entry);\n          cursor['continue']();\n        } else {\n          resolve(results);\n        }\n      };\n    });\n  });\n}\n\n;\n\nfunction mkdir(fullPath) {\n  return new Promise(function (resolve, reject) {\n    initOS('readwrite', function (os) {\n      var dir = withTrailingSlash(_path2['default']);\n      var req = os.put({\n        'path': fullPath,\n        'dir': _path2['default'].dirname(dir),\n        'type': 'directory'\n      });\n      req.onerror = reject;\n\n      req.onsuccess = function (e) {\n        resolve();\n      };\n    });\n  });\n}\n\n;\n\nfunction rmdir(fullPath) {\n  return readdir(fullPath).then(function removeFiles(files) {\n    if (!files || !files.length) {\n      return removeFile(fullPath);\n    }\n\n    var file = files.shift(),\n        func = file.type === 'directory' ? rmdir : removeFile;\n    return func(file.name).then(function () {\n      return removeFiles(files);\n    });\n  });\n}\n\n;","map":{"version":3,"sources":["C:/Users/suvro/cessini2/node_modules/fs-web/dist/cjs/core.js"],"names":["Object","defineProperty","exports","value","readFile","readString","writeFile","removeFile","readdir","mkdir","rmdir","_interopRequireDefault","obj","__esModule","_path","require","_path2","_directory_entry","_directory_entry2","ab2str","buf","String","fromCharCode","apply","Uint16Array","str2ab","str","ArrayBuffer","length","bufView","i","strLen","charCodeAt","DB_NAME","window","location","host","OS_NAME","DIR_IDX","init","callback","req","indexedDB","open","onupgradeneeded","e","db","target","result","objectStore","createObjectStore","keyPath","createIndex","unique","onsuccess","initOS","type","trans","transaction","os","readFrom","fileName","Promise","resolve","reject","get","onerror","res","data","then","toString","put","dirname","withTrailingSlash","path","directoryWithTrailingSlash","directoryName","dir","idx","index","range","IDBKeyRange","only","openCursor","results","cursor","entry","push","fullPath","removeFiles","files","file","shift","func","name"],"mappings":"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","sourcesContent":["/*fs-web@1.0.0#core*/\n'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nexports.readFile = readFile;\nexports.readString = readString;\nexports.writeFile = writeFile;\nexports.removeFile = removeFile;\nexports.readdir = readdir;\nexports.mkdir = mkdir;\nexports.rmdir = rmdir;\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { 'default': obj };\n}\nvar _path = require('path');\nvar _path2 = _interopRequireDefault(_path);\nvar _directory_entry = require('./directory_entry.js');\nvar _directory_entry2 = _interopRequireDefault(_directory_entry);\nfunction ab2str(buf) {\n    return String.fromCharCode.apply(null, new Uint16Array(buf));\n}\nfunction str2ab(str) {\n    var buf = new ArrayBuffer(str.length * 2);\n    var bufView = new Uint16Array(buf);\n    for (var i = 0, strLen = str.length; i < strLen; i++) {\n        bufView[i] = str.charCodeAt(i);\n    }\n    return buf;\n}\nvar DB_NAME = window.location.host + '_filesystem', OS_NAME = 'files', DIR_IDX = 'dir';\nfunction init(callback) {\n    var req = window.indexedDB.open(DB_NAME, 1);\n    req.onupgradeneeded = function (e) {\n        var db = e.target.result;\n        var objectStore = db.createObjectStore(OS_NAME, { keyPath: 'path' });\n        objectStore.createIndex(DIR_IDX, 'dir', { unique: false });\n    };\n    req.onsuccess = function (e) {\n        callback(e.target.result);\n    };\n}\nfunction initOS(type, callback) {\n    init(function (db) {\n        var trans = db.transaction([OS_NAME], type), os = trans.objectStore(OS_NAME);\n        callback(os);\n    });\n}\nvar readFrom = function readFrom(fileName) {\n    return new Promise(function (resolve, reject) {\n        initOS('readonly', function (os) {\n            var req = os.get(fileName);\n            req.onerror = reject;\n            req.onsuccess = function (e) {\n                var res = e.target.result;\n                if (res && res.data) {\n                    resolve(res.data);\n                } else {\n                    reject('File not found');\n                }\n            };\n        });\n    });\n};\nfunction readFile(fileName) {\n    return readFrom(fileName).then(function (data) {\n        if (!(data instanceof ArrayBuffer)) {\n            data = str2ab(data.toString());\n        }\n        return data;\n    });\n}\nfunction readString(fileName) {\n    return readFrom(fileName).then(function (data) {\n        if (data instanceof ArrayBuffer) {\n            data = ab2str(data);\n        }\n        return data;\n    });\n}\n;\nfunction writeFile(fileName, data) {\n    return new Promise(function (resolve, reject) {\n        initOS('readwrite', function (os) {\n            var req = os.put({\n                'path': fileName,\n                'dir': _path2['default'].dirname(fileName),\n                'type': 'file',\n                'data': data\n            });\n            req.onerror = reject;\n            req.onsuccess = function (e) {\n                resolve();\n            };\n        });\n    });\n}\n;\nfunction removeFile(fileName) {\n    return new Promise(function (resolve) {\n        initOS('readwrite', function (os) {\n            var req = os['delete'](fileName);\n            req.onerror = req.onsuccess = function (e) {\n                resolve();\n            };\n        });\n    });\n}\n;\nfunction withTrailingSlash(path) {\n    var directoryWithTrailingSlash = path[path.length - 1] === '/' ? path : path + '/';\n    return directoryWithTrailingSlash;\n}\nfunction readdir(directoryName) {\n    return new Promise(function (resolve, reject) {\n        initOS('readonly', function (os) {\n            var dir = _path2['default'].dirname(withTrailingSlash(directoryName));\n            var idx = os.index(DIR_IDX);\n            var range = IDBKeyRange.only(dir);\n            var req = idx.openCursor(range);\n            req.onerror = function (e) {\n                reject(e);\n            };\n            var results = [];\n            req.onsuccess = function (e) {\n                var cursor = e.target.result;\n                if (cursor) {\n                    var value = cursor.value;\n                    var entry = new _directory_entry2['default'](value.path, value.type);\n                    results.push(entry);\n                    cursor['continue']();\n                } else {\n                    resolve(results);\n                }\n            };\n        });\n    });\n}\n;\nfunction mkdir(fullPath) {\n    return new Promise(function (resolve, reject) {\n        initOS('readwrite', function (os) {\n            var dir = withTrailingSlash(_path2['default']);\n            var req = os.put({\n                'path': fullPath,\n                'dir': _path2['default'].dirname(dir),\n                'type': 'directory'\n            });\n            req.onerror = reject;\n            req.onsuccess = function (e) {\n                resolve();\n            };\n        });\n    });\n}\n;\nfunction rmdir(fullPath) {\n    return readdir(fullPath).then(function removeFiles(files) {\n        if (!files || !files.length) {\n            return removeFile(fullPath);\n        }\n        var file = files.shift(), func = file.type === 'directory' ? rmdir : removeFile;\n        return func(file.name).then(function () {\n            return removeFiles(files);\n        });\n    });\n}\n;"]},"metadata":{},"sourceType":"script"}